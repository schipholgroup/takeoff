version: "3.3"
services:
  python:
    image: python:3.7.0
    working_dir: /root/
    volumes:
    - type: bind
      source: ./
      target: /root
    tty: true

  hadolint:
    image: hadolint/hadolint:latest-debian
    working_dir: /root/
    volumes:
    - type: bind
      source: ./
      target: /root
    tty: true
  dockerception:
    user: root
    image: dockerception
    build:
      context: ./
      dockerfile: Dockerfile_python
    working_dir: /root/
    privileged: true
    volumes:
    - type: bind
      source: ./
      target: /root
    - "/var/run/docker.sock:/var/run/docker.sock"
    tty: true
    environment:
    - BUILD_SOURCEBRANCHNAME
    - BUILD_DEFINITIONNAME
    - AZURE_TENANTID
    - AZURE_KEYVAULT_USERNAME_DEV
    - AZURE_KEYVAULT_PASSWORD_DEV
    - AZURE_KEYVAULT_USERNAME_ACP
    - AZURE_KEYVAULT_PASSWORD_ACP
    - AZURE_KEYVAULT_USERNAME_PRD
    - AZURE_KEYVAULT_PASSWORD_PRD
